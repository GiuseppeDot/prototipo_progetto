<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <title>AR Menu â€“ Demo tipo KabaQ</title>

    <!-- THREE.JS IMPORT MAP & AR.JS FOR THREE.JS -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.164.1/build/three.module.js"
        }
      }
    </script>
    <!-- <script src="https://jeromeetienne.github.io/AR.js/three.js/build/ar-threex.js"></script> -->

    <!-- A-Frame and AR.js Libraries -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.7/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1/dist/jsQR.min.js"></script>

    <!-- THEME -->
    <link rel="stylesheet" href="test.css" />
  </head>

  <body>
    <!-- Pulsante per riaprire il menu quando Ã¨ chiuso -->
    <button id="sidebarToggle" aria-label="Apri menu">â˜°</button>

    <!-- ===== SIDEBAR ================================================= -->
    <div id="sidebar">
      <h2>L'ipotetico</h2>

      <details open>
        <summary>Best Seller</summary>
        <div id="bestsellerList"></div>
      </details>

      <details>
        <summary>
          <img src="./asset/primi.png" alt="Primi" class="menu-label" />
        </summary>
        <div id="primiList"></div>
      </details>

      <details>
        <summary>
          <img src="./asset/secondi.png" alt="Secondi" class="menu-label" />
        </summary>
        <div id="secondiList"></div>
      </details>
    </div>

    <!-- ===== CARRELLO FLOATING & DRAWER =============================== -->
    <button id="cartBtn" aria-label="Apri carrello">
      ðŸ›’<span id="badge">0</span>
    </button>

    <aside id="cartPane">
      <button id="closeCart" class="closeBtn">âœ•</button>
      <h3>Il tuo ordine</h3>

      <ul id="cartItems"></ul>
      <strong id="cartTotal">Totale â‚¬0,00</strong><br />

      <button id="clearCart">Svuota</button>
      <button id="checkoutBtn">Checkout</button>
    </aside>

    <!-- ===== A-FRAME SCENE ========================================== -->
    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: true; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
    >
      <a-assets>
        <canvas id="qrCanvas" style="display: none"></canvas>
      </a-assets>
      <a-marker type="pattern" url="asset/markerQR.patt">
        <a-entity
          id="modelHolder"
          rotation="0 0 0"
          position="0 0.25 0"
          scale="1 1 1"
          gltf-model=""
          visible="false"
        >
        </a-entity>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
    <img
      id="fallback"
      src=""
      alt="3D Model Fallback"
      style="
        display: none;
        width: 100%;
        height: auto;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        max-width: 300px;
      "
    />

    <!-- ===== UI CONTROLS ========================================== -->
    <button
      id="autoRotateBtn"
      style="
        position: fixed;
        bottom: 20px;
        right: 100px;
        z-index: 10;
        padding: 10px;
      "
    >
      â†»
    </button>

    <!-- ===== APP LOGIC ============================================= -->
    <script src="test.js"></script>
  </body>
</html>
